<!DOCTYPE html>
<html>
  <head>
  </head>
  <body style="background: black;display: flex;flex-direction: column-reverse;">
    <button id="send">send</button>
    <input id="key">
    <p style="color: white; margin: 0">key</p>
    <input id="parameter">
    <p style="color: white; margin: 0">parameter</p>
    <input id="request">
    <p style="color: white; margin: 0">request</p>
    
    <div id="answers">
        <p style="white-space: pre-wrap; color: white;">server answers:</p>
    </div>
    <script>
    document.querySelector("#send").addEventListener("click", send());
    function send() {
      console.log("Sending...");
      let options = {
        mode: "no-cors",
        method: "POST",
        headers: {"content-type" : "application/json"},
        body: JSON.stringify(document.querySelector("#request").value)
        };
        console.log(options);
        fetch(`https://script.google.com/macros/s/${document.querySelector("#key").value}/exec`, options)
            .then(response => response.text())
            .then(result => {console.log(result); document.querySelector("#answers").insertAdjacentHTML("beforeend",`<p style="white-space: pre-wrap; color: green;">&{result}</p>`)})
            .catch(error => {console.log(error); document.querySelector("#answers").insertAdjacentHTML("beforeend",`<p style="white-space: pre-wrap; color: red;">&{error}</p>`)});
    }  
    </script>
</body></html>
